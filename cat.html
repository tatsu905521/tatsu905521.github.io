<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å°è²“åƒé£Ÿç‰©éŠæˆ²</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #fcefe6; /* èƒŒæ™¯æ•´å€‹ä¸Šè‰² */
    }
    canvas {
        display: block;
        margin: 0;
        background: #fff0e6; /* æŸ”å’Œä½†ä¸æœƒç™½ç™½ */
    }
    #restartBtn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px 35px;
        font-size: 28px;
        border: none;
        background: #ff8ba7;
        color: white;
        border-radius: 12px;
        cursor: pointer;
        display: none;
        box-shadow: 0px 4px 10px rgba(0,0,0,0.2);
    }
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>
<button id="restartBtn">é‡æ–°é–‹å§‹</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const restartBtn = document.getElementById("restartBtn");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

// === å°è²“ ===
const catImg = new Image();
catImg.src = "61ba6fdc-045c-4615-9b98-ba21901e27f1.png";

let cat = {
    x: canvas.width / 2,
    y: canvas.height - 200,
    size: 180,      // â† å°è²“è®Šå¤§ï¼
    speed: 22       // â† ç§»å‹•æ›´å¿«
};

// === é£Ÿç‰© emoji ===
const goodFood = ["ğŸ°","ğŸ§","ğŸ­","ğŸ¬","ğŸ¦","ğŸ©","ğŸ“","ğŸª"];
const badFood = ["ğŸ’£","ğŸª¨","ğŸ§±","âš™ï¸","ğŸ—¿","ğŸ§¨"];

let score = 0;
let life = 1;
let foodList = [];
let foodSpeed = 3;
let spawnRate = 16;
let frame = 0;

// === ç”Ÿæˆé£Ÿç‰© ===
function spawnFood() {
    const isGood = Math.random() > 0.33;
    foodList.push({
        x: Math.random() * (canvas.width - 40),
        y: -40,
        size: 60,
        speed: foodSpeed,
        good: isGood,
        emoji: isGood 
            ? goodFood[Math.floor(Math.random() * goodFood.length)]
            : badFood[Math.floor(Math.random() * badFood.length)]
    });
}

// === ç¹ªè£½é£Ÿç‰© ===
function drawFood() {
    for (let f of foodList) {
        ctx.font = f.size + "px serif";
        ctx.fillText(f.emoji, f.x, f.y);
    }
}

// === æ›´æ–°é£Ÿç‰© ===
function updateFood() {
    for (let i = foodList.length - 1; i >= 0; i--) {
        let f = foodList[i];
        f.y += f.speed;

        if (Math.abs(f.x - cat.x) < cat.size/2 &&
            Math.abs(f.y - cat.y) < cat.size/2) {

            if (f.good) {
                score += 100;
            } else {
                life--;
            }
            foodList.splice(i, 1);
            continue;
        }

        if (f.y > canvas.height + 50) {
            foodList.splice(i, 1);
        }
    }
}

// ===ç•«è²“===
function drawCat() {
    ctx.drawImage(catImg, cat.x - cat.size/2, cat.y - cat.size/2, cat.size, cat.size);
}

// === UI ===
function drawUI() {
    ctx.fillStyle = "#333";
    ctx.font = "30px sans-serif";
    ctx.fillText("åˆ†æ•¸: " + score, 20, 40);
    ctx.fillText("ç”Ÿå‘½: " + life, 20, 80);
}

function gameOver() {
    ctx.fillStyle = "#000";
    ctx.font = "55px sans-serif";
    ctx.fillText("éŠæˆ²çµæŸï¼åˆ†æ•¸ï¼š" + score,
        canvas.width / 2 - 200,
        canvas.height / 2
    );

    restartBtn.style.display = "block";
}

// === ä¸»è¿´åœˆ ===
function gameLoop() {
    if (life <= 0) {
        gameOver();
        return;
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    if (frame % spawnRate === 0) spawnFood();

    if (frame % 300 === 0) {
        foodSpeed += 0.4;
        cat.speed += 1;
        if (spawnRate > 6) spawnRate--;
    }

    updateFood();
    drawFood();
    drawCat();
    drawUI();

    frame++;
    requestAnimationFrame(gameLoop);
}
requestAnimationFrame(gameLoop);

// === æ§åˆ¶ ===
document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") cat.x -= cat.speed;
    if (e.key === "ArrowRight") cat.x += cat.speed;
});

document.addEventListener("touchmove", e => {
    cat.x = e.touches[0].clientX;
});

// === é‡æ–°é–‹å§‹ ===
restartBtn.onclick = () => {
    restartBtn.style.display = "none";
    score = 0;
    life = 1;
    foodList = [];
    frame = 0;
    foodSpeed = 3;
    spawnRate = 16;
    cat.x = canvas.width / 2;
    requestAnimationFrame(gameLoop);
};
</script>
</body>
</html>



</body>
</html>
