<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å°è²“åƒæ±è¥¿éŠæˆ²</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: #fcefe6;
    }
    canvas {
        display: block;
    }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// è®“ canvas è‡ªå‹•è®Šæˆå…¨è¢å¹•
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// ==========================
//        éŠæˆ²åƒæ•¸è¨­å®š
// ==========================
let cat = {
    x: canvas.width / 2,
    y: canvas.height - 120,
    width: 120,
    height: 120,
    speed: 18   // â˜… æå‡å°è²“ç§»å‹•é€Ÿåº¦ï¼ˆåŸæœ¬è¼ƒæ…¢ï¼‰
};

let foods = [];
let score = 0;
let life = 1;     // â˜… ç”Ÿå‘½å€¼æ”¹æˆ 1
let fallSpeed = 3;
let spawnRate = 350; // â˜… æ›´é«˜å¯†åº¦ï¼ˆæ•¸å­—è¶Šå°ç”Ÿæˆè¶Šå¿«ï¼‰
let lastSpawn = 0;

// ç”œé£Ÿèˆ‡ä¸èƒ½åƒçš„æ±è¥¿
const sweetFoods = ["ğŸ°", "ğŸ©", "ğŸ§", "ğŸª"];
const badFoods = ["ğŸ—‘ï¸", "ğŸ’€", "ğŸª¨"];

// ==========================
//      ç”Ÿæˆé£Ÿç‰©
// ==========================
function spawnFood() {
    let type = Math.random() < 0.75 ? "good" : "bad"; // ç”œé£Ÿ 75%
    let emoji = type === "good" 
        ? sweetFoods[Math.floor(Math.random() * sweetFoods.length)]
        : badFoods[Math.floor(Math.random() * badFoods.length)];

    foods.push({
        x: Math.random() * (canvas.width - 50),
        y: -60,
        size: 50,
        type: type,
        emoji: emoji
    });
}

// ==========================
//      å°è²“ç§»å‹•æ§åˆ¶
// ==========================
document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowLeft") {
        cat.x -= cat.speed;
    } else if (e.key === "ArrowRight") {
        cat.x += cat.speed;
    }

    // é‚Šç•Œé™åˆ¶
    cat.x = Math.max(0, Math.min(canvas.width - cat.width, cat.x));
});

// ==========================
//      ä¸»éŠæˆ²è¿´åœˆ
// ==========================
function gameLoop(timestamp) {

    // æ¸…ç©ºç•«é¢
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // è‡ªå‹•ç”Ÿæˆé£Ÿç‰©
    if (timestamp - lastSpawn > spawnRate) {
        spawnFood();
        lastSpawn = timestamp;
        fallSpeed += 0.03; // â˜… éš¨æ™‚é–“åŠ å¿«è½ä¸‹é€Ÿåº¦
    }

    // ç¹ªè£½å°è²“
    ctx.font = `${cat.width}px serif`;
    ctx.fillText("ğŸ±", cat.x, cat.y);

    // æ›´æ–°é£Ÿç‰©ä½ç½®
    for (let i = foods.length - 1; i >= 0; i--) {
        let f = foods[i];
        f.y += fallSpeed;

        // ç¹ªè£½é£Ÿç‰©
        ctx.font = `${f.size}px serif`;
        ctx.fillText(f.emoji, f.x, f.y);

        // ç¢°æ’åˆ¤å®š
        if (
            f.y + f.size > cat.y &&
            f.y < cat.y + cat.height &&
            f.x + f.size > cat.x &&
            f.x < cat.x + cat.width
        ) {
            if (f.type === "good") {
                score += 100; // â˜… ç”œé£Ÿ +100
            } else {
                life -= 1;
            }
            foods.splice(i, 1);
        }

        // è¶…å‡ºç•«é¢ç§»é™¤
        if (f.y > canvas.height + 100) {
            foods.splice(i, 1);
        }
    }

    // UIï¼šåˆ†æ•¸ & ç”Ÿå‘½
    ctx.font = "30px Arial";
    ctx.fillStyle = "#000";
    ctx.fillText(`Score: ${score}`, 20, 40);
    ctx.fillText(`Life: ${life}`, 20, 80);

    // Game Over
    if (life <= 0) {
        ctx.font = "60px Arial";
        ctx.fillStyle = "red";
        ctx.fillText("Game Over", canvas.width / 2 - 150, canvas.height / 2);
        return;
    }

    requestAnimationFrame(gameLoop);
}

requestAnimationFrame(gameLoop);
</script>

</body>
</html>


</body>
</html>
